version: 1.0
provider:
  name: openfaas
functions:
  lgtmbot:
    lang: golang-middleware
    handler: ./lgtmbot
    image: techknowlogick/lgtmbot:latest
    secrets:
      - webhook-secret # random string generated by you
      - gitea-host # host of your gitea instance, ex. https://gitea.example.com/
      - gitea-token # gitea api token generated from https://gitea.example.com/user/settings/applications
    build_args:
      GO111MODULE: on

configuration:
  templates:
    - name: golang-middleware
      source: https://github.com/openfaas/golang-http-template
